@{
    ViewData["Title"] = "Detalhes do Simulado";
    int id = (ViewData["SimuladoId"] is int v) ? v : 0;
    string data = ViewData["SimuladoData"]?.ToString() ?? "--/--/----";
    string hora = ViewData["SimuladoHora"]?.ToString() ?? "--:--";
    string turma = ViewData["SimuladoTurma"]?.ToString() ?? "Turma não definida";
    string media = ViewData["SimuladoMediaTurma"]?.ToString() ?? "0,00";
    string evolucao = ViewData["SimuladoEvolucaoTurma"]?.ToString() ?? "+0,0%";
}

<div class="mb-3">
    <a class="btn btn-outline-secondary btn-no-focus" href="/Mock">Voltar</a>
</div>
<h4 class="mb-1">Simulado #@id</h4>
<p class="text-muted mb-2">Data/Horário: @data @hora | Turma: @turma</p>
<div class="d-flex flex-wrap align-items-center gap-3 mb-3">
    <div class="p-2 border rounded bg-light" style="min-width:160px;">
        <div class="small text-muted">Média da turma</div>
        <div class="fs-5 fw-semibold">@media</div>
    </div>
    <div class="p-2 border rounded bg-light" style="min-width:160px;">
        <div class="small text-muted">Evolução vs anterior</div>
        <div class="fs-5 fw-semibold @((evolucao.StartsWith("+"))?"text-success": (evolucao.StartsWith("-"))?"text-danger":"")">@evolucao</div>
    </div>
        <div class="p-2 border rounded bg-light" style="min-width:160px;">
        <div class="small text-muted">Alunos presentes</div>
        <div class="fs-5 fw-semibold">
            @ViewData["SimuladoPresentes"]/@ViewData["SimuladoTotalAlunos"]
        </div>
    </div>
</div>
<hr />
<div class="mb-4">
    <h6 class="mb-1 text-center">Desempenho (Questões)</h6>
    <div class="d-flex justify-content-center align-items-center gap-4 flex-wrap">
        <div class="rounded-circle border position-relative"
             style="width:240px;height:240px;display:flex;align-items:center;justify-content:center;font-size:0.9rem;background:conic-gradient(#5492ca 0deg 150deg,#ef7b1b 150deg 300deg,#0b2440 300deg 360deg);">
        </div>
        <table class="table table-sm mb-0 align-self-center" style="max-width:260px;min-width:220px;">
            <thead>
                <tr><th>Categoria</th><th class="text-end">%</th></tr>
            </thead>
            <tbody>
                <tr><td><span class="badge" style="background:#5492ca">&nbsp;</span> Certas</td><td class="text-end">41,7%</td></tr>
                <tr><td><span class="badge" style="background:#ef7b1b">&nbsp;</span> Erradas</td><td class="text-end">50,0%</td></tr>
                <tr><td><span class="badge" style="background:#0b2440">&nbsp;</span> Em branco</td><td class="text-end">8,3%</td></tr>
            </tbody>
        </table>
    </div>
</div>
<table class="table table-hover align-middle">
    <thead>
        <tr>
            <th>Matéria</th>
            <th>Questões certas</th>
            <th>Questões erradas</th>
            <th>Questões em branco</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>História</td>
            <td>5 (62,50%)</td>
            <td>2 (25,00%)</td>
            <td>1 (12,50%)</td>
        </tr>
        <tr>
            <td>Matemática</td>
            <td>8 (66,67%)</td>
            <td>3 (25,00%)</td>
            <td>1 (8,33%)</td>
        </tr>
        <tr>
            <td>Português</td>
            <td>5 (41,67%)</td>
            <td>6 (50,00%)</td>
            <td>1 (8,33%)</td>
        </tr>
    </tbody>
</table>